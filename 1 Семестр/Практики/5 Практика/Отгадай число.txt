using System;
using System.Diagnostics.CodeAnalysis;
using System.Diagnostics.Metrics;
class App
{
    public static void Main()
    {
        Console.WriteLine("Введите количество действий:");
        var n = Convert.ToInt32(Console.ReadLine());
        //список действий + счётчик
        string[] moves = new string[n];
        var countM = 0;
        //список цифр
        int[] numbers = new int[n];
        //список иксов и счётчик для иксов (+ список действий для иксов и сам коэфициент при Х)
        int[] exes = new int[n];
        var countX = 0;
        string[] movesX = new string[n];
        var resultX = 0;
        //объявление результата
        double R = 0;
        for (int i = 0; i < n; i++)
        {
            //цикл ввода действий и переменных
            Console.WriteLine("Введите арифметическую операцию, а затем число (если вводите Х, то операцией может быть только + или -):");
            var move = Convert.ToString(Console.ReadLine());
            var x = Convert.ToString(Console.ReadLine());
            if (x == "x")
            {
                movesX[countX] = move; // добавление дейсвтия с Х
                exes[countX] = 1; //добавление коэфициентов при Х
                countX++;
            }
            else
            {
                moves[countM] = move;
                numbers[countM] = Int32.Parse(x);
                countM++;
            }

        }
        // ПРОВЕРКА НА ТО, ЧТО Х-ов ВООБЩЕ НЕТ
        var sum = 0;
        foreach (var i in exes)
        {
            sum += i;
        }
        //
        Console.WriteLine("Ведите результат:");
        R = Convert.ToDouble(Console.ReadLine());
        if (sum == 0)
        {
            //
            for (int i = moves.Length - 1; i > moves.Length; i--)
            {
                Console.WriteLine(moves[i]);
                Console.WriteLine(moves.Length);
                double moveNum = numbers[i];
                var moveDos = moves[i];
                if (moveDos == "*")
                {
                    R = R / moveNum;
                }
                if (moveDos == "+")
                {
                    R = R - moveNum;
                }
                else if (moveDos == "-")
                {
                    R = R + moveNum;
                }
            }
            Console.WriteLine($"Загаданное число равно {R}");
        }
        else
        {

        }
        //Тесты
        //Console.WriteLine("Всё с иксами:");
        //Console.WriteLine(String.Join(" ", movesX));
        //Console.WriteLine(String.Join(" ", exes));
        //Console.WriteLine("Всё с числами:");
        //Console.WriteLine(String.Join(" ", moves));
        //Console.WriteLine(String.Join(" ", numbers));
    }
}

